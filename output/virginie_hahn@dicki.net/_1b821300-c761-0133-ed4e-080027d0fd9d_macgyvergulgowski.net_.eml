Date: Tue, 08 Mar 2016 13:34:08 +0000
From: Winona Heathcote <emelie_oberbrunner@macgyvergulgowski.net>
To: virginie_hahn@dicki.net
Message-ID: <1b821300-c761-0133-ed4e-080027d0fd9d@macgyvergulgowski.net>
Subject: robocopy security fails and return wrong return code
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_56ded611ea3be_118541a29ae932df";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_56ded611ea3be_118541a29ae932df
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

I wrote a PowerShell script to  backup folders tree using Robocopy
The copy code is:

robocopy "L:\Source - Copy" "M:" /LOG:Logfile /MIR /SEC


Both target and source are on the same machine. I am the administrator.
As I am not an expert in this field, 

Two problems: 


the When I use the /SEC flag the operation fails with access denied error
I found many posts with this error, only i didnt really understand whether  it is a bug, planed behavior, and how to fix it.
When executing the command without the /SEC, copy succeed.


This is the log file:


  Started : Tuesday, March 08, 2016 3:01:59 PM
    Source : L:\Source - Copy\
      Dest : M:\
     Files : .
   Options : . /S /E /DCOPY:DA /COPY:DATS /PURGE /MIR /R:1000000 /W:30 
  
  
  
  0    L:\Source - Copy\ 2016/03/08 15:01:59 
  
  ERROR 5 (0x00000005) Copying NTFS Security to Destination Directory M:\ Access is denied.



When it fails, the return code of ROBOCOPY is 0, which means no change. This could have been ok, if the reason was that there is nothing to mirror.
But the reason here is actually error. 
Checked that is PowerShell script as well as in cmd file as well. What is the idea?

----==_mimepart_56ded611ea3be_118541a29ae932df
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<p>I wrote a PowerShell script to  backup folders tree using Robocopy
The copy code is:</p>

<pre><code>robocopy "L:\Source - Copy" "M:" /LOG:Logfile /MIR /SEC
</code></pre>

<p>Both target and source are on the same machine. I am the administrator.
As I am not an expert in this field, </p>

<p>Two problems: </p>

<ol>
<li>the When I use the /SEC flag the operation fails with access denied error
I found many posts with this error, only i didnt really understand whether  it is a bug, planed behavior, and how to fix it.
When executing the command without the /SEC, copy succeed.</li>
</ol>

<p>This is the log file:</p>

<blockquote>
  <p>Started : Tuesday, March 08, 2016 3:01:59 PM<br>
    Source : L:\Source - Copy\
      Dest : M:\
     Files : <em>.</em>
   Options : <em>.</em> /S /E /DCOPY:DA /COPY:DATS /PURGE /MIR /R:1000000 /W:30 </p>
  
  <hr>
  
  <p>0    L:\Source - Copy\ 2016/03/08 15:01:59 </p>
  
  <p>ERROR 5 (0x00000005) Copying NTFS Security to Destination Directory M:\ Access is denied.</p>
</blockquote>

<ol start="2">
<li>When it fails, the return code of ROBOCOPY is 0, which means no change. This could have been ok, if the reason was that there is nothing to mirror.
But the reason here is actually error. 
Checked that is PowerShell script as well as in cmd file as well. What is the idea?</li>
</ol>
----==_mimepart_56ded611ea3be_118541a29ae932df--
