Date: Tue, 08 Mar 2016 13:31:24 +0000
From: Julien McCullough <eino_daugherty@anderson.org>
To: virginie_hahn@dicki.net
Message-ID: <1b7df350-c761-0133-ed4e-080027d0fd9d@anderson.org>
Subject: Angular app with ui-router not hitting controller unless its inline
 function
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_56ded611e30af_118541a29ae92888";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_56ded611e30af_118541a29ae92888
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

I am having trouble with ui-router. If I use an inline function it works, otherwise when I click on the route the controller is not used. I can debug the browser and the js is being delivered but no break points are ever touched.   

//This is the error when I go to the non working route
Error: [$injector:unpr] http://errors.angularjs.org/1.5.0/$injector/unpr?p0=Provider%20%3C-%20%20%3C-%20MainCtrl

//The commented main route works
(function(){
angular.module('invNodeServer',[
        'ui.router'

])
    .config(function ($stateProvider,$urlRouterProvider,$locationProvider) {
        $locationProvider.html5Mode({
            enabled: true,
            requireBase: false
        });
        $urlRouterProvider.otherwise("/");
        $stateProvider
            .state('main', {
                url: "/",
                templateUrl: "app/main/main.html",
                controller:'MainCtrl',
                controllerAs:'vm'
            })
            //.state('main', {
            //    url: "/",
            //    templateUrl: "app/main/main.html",
            //    controller:function($scope){
            //        $scope.title = 'Main'
            //    }
            //})

    })
    })();


// This is the controller for the non working route
(function () {
'use strict';
var controllerId = 'MainCtrl';

angular.module('invNodeServer').controller(controllerId, MainCtrl);

MainCtrl.$inject = [''];

/* @ngInject */
function MainCtrl() {

    /* jshint validthis: true */
    var vm = this;
    vm.title = 'Main';
    vm.activate = activate;

    activate();

    ////////////////

    function activate() {
    }
}
})();

----==_mimepart_56ded611e30af_118541a29ae92888
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<p>I am having trouble with ui-router. If I use an inline function it works, otherwise when I click on the route the controller is not used. I can debug the browser and the js is being delivered but no break points are ever touched.   </p>

<pre><code>//This is the error when I go to the non working route
Error: [$injector:unpr] http://errors.angularjs.org/1.5.0/$injector/unpr?p0=Provider%20%3C-%20%20%3C-%20MainCtrl

//The commented main route works
(function(){
angular.module('invNodeServer',[
        'ui.router'

])
    .config(function ($stateProvider,$urlRouterProvider,$locationProvider) {
        $locationProvider.html5Mode({
            enabled: true,
            requireBase: false
        });
        $urlRouterProvider.otherwise("/");
        $stateProvider
            .state('main', {
                url: "/",
                templateUrl: "app/main/main.html",
                controller:'MainCtrl',
                controllerAs:'vm'
            })
            //.state('main', {
            //    url: "/",
            //    templateUrl: "app/main/main.html",
            //    controller:function($scope){
            //        $scope.title = 'Main'
            //    }
            //})

    })
    })();


// This is the controller for the non working route
(function () {
'use strict';
var controllerId = 'MainCtrl';

angular.module('invNodeServer').controller(controllerId, MainCtrl);

MainCtrl.$inject = [''];

/* @ngInject */
function MainCtrl() {

    /* jshint validthis: true */
    var vm = this;
    vm.title = 'Main';
    vm.activate = activate;

    activate();

    ////////////////

    function activate() {
    }
}
})();
</code></pre>
----==_mimepart_56ded611e30af_118541a29ae92888--
